<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²°ì œ ì‹¤íŒ¨ - ì•Œë¹„</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
      20%, 40%, 60%, 80% { transform: translateX(10px); }
    }
    .shake-animation { animation: shake 0.8s ease-in-out; }
  </style>
</head>
<body class="bg-gray-50">
  <div class="max-w-md mx-auto min-h-screen p-4 flex flex-col justify-center">
    <!-- ì‹¤íŒ¨ ì•„ì´ì½˜ -->
    <div class="text-center mb-8">
      <div class="text-8xl mb-4 shake-animation">âŒ</div>
      <h1 class="text-3xl font-bold text-gray-800 mb-2">ê²°ì œ ì‹¤íŒ¨</h1>
      <p class="text-gray-600">ê²°ì œ ì²˜ë¦¬ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
    </div>

    <!-- ì˜¤ë¥˜ ì •ë³´ ì¹´ë“œ -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
      <h2 class="text-lg font-bold mb-4 flex items-center">
        <span class="mr-2">âš ï¸</span>
        ì˜¤ë¥˜ ì •ë³´
      </h2>
      
      <div class="p-4 bg-red-50 rounded-lg mb-4">
        <p class="text-sm text-red-800" id="errorMessage">
          ê²°ì œê°€ ì·¨ì†Œë˜ì—ˆê±°ë‚˜ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
        </p>
      </div>

      <div class="space-y-3 text-sm">
        <div class="flex justify-between py-2 border-b border-gray-100">
          <span class="text-gray-600">ì˜¤ë¥˜ ì½”ë“œ</span>
          <span class="font-mono text-xs text-red-600" id="errorCode">UNKNOWN</span>
        </div>
        <div class="flex justify-between py-2">
          <span class="text-gray-600">ë°œìƒ ì‹œê°„</span>
          <span class="font-bold" id="errorTime">-</span>
        </div>
      </div>
    </div>

    <!-- í•´ê²° ë°©ë²• ì•ˆë‚´ -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
      <h3 class="text-lg font-bold mb-4 flex items-center">
        <span class="mr-2">ğŸ’¡</span>
        í•´ê²° ë°©ë²•
      </h3>
      
      <div class="space-y-3 text-sm text-gray-700">
        <div class="flex items-start space-x-2">
          <span>â€¢</span>
          <span>ì¹´ë“œ í•œë„ ë° ì”ì•¡ì„ í™•ì¸í•´ì£¼ì„¸ìš”</span>
        </div>
        <div class="flex items-start space-x-2">
          <span>â€¢</span>
          <span>ì¹´ë“œ ì •ë³´ê°€ ì •í™•í•œì§€ í™•ì¸í•´ì£¼ì„¸ìš”</span>
        </div>
        <div class="flex items-start space-x-2">
          <span>â€¢</span>
          <span>ë‹¤ë¥¸ ê²°ì œ ìˆ˜ë‹¨ì„ ì‹œë„í•´ì£¼ì„¸ìš”</span>
        </div>
        <div class="flex items-start space-x-2">
          <span>â€¢</span>
          <span>ì¸í„°ë„· ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”</span>
        </div>
        <div class="flex items-start space-x-2">
          <span>â€¢</span>
          <span>ë¬¸ì œê°€ ê³„ì†ë˜ë©´ ê³ ê°ì„¼í„°(1588-0000)ë¡œ ë¬¸ì˜í•˜ì„¸ìš”</span>
        </div>
      </div>
    </div>

    <!-- ë²„íŠ¼ -->
    <div class="space-y-3">
      <button onclick="retryPayment()"
              class="w-full py-4 rounded-xl text-lg font-bold bg-blue-500 text-white hover:bg-blue-600 shadow-lg transition">
        ë‹¤ì‹œ ê²°ì œí•˜ê¸°
      </button>
      
      <a href="/" 
         class="block w-full py-3 text-center rounded-xl font-bold bg-white text-gray-700 border-2 border-gray-200 hover:bg-gray-50 transition">
        ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
      </a>
    </div>

    <!-- ê³ ê°ì„¼í„° ì•ˆë‚´ -->
    <div class="mt-6 p-4 bg-gray-100 rounded-lg">
      <p class="text-xs text-center text-gray-600">
        ğŸ†˜ <strong>ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</strong><br>
        ê³ ê°ì„¼í„°: 1588-0000 (í‰ì¼ 09:00-18:00)<br>
        ì´ë©”ì¼: support@albi.co.kr
      </p>
    </div>
  </div>

  <script>
    window.onload = function() {
      // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì˜¤ë¥˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const urlParams = new URLSearchParams(window.location.search);
      const errorCode = urlParams.get('code');
      const errorMessage = urlParams.get('message');

      // ì˜¤ë¥˜ ì½”ë“œ í‘œì‹œ
      if (errorCode) {
        document.getElementById('errorCode').textContent = errorCode;
      }

      // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
      if (errorMessage) {
        document.getElementById('errorMessage').textContent = decodeURIComponent(errorMessage);
      } else {
        // ê¸°ë³¸ ì˜¤ë¥˜ ë©”ì‹œì§€
        const defaultMessages = {
          'INVALID_CARD': 'ìœ íš¨í•˜ì§€ ì•Šì€ ì¹´ë“œì…ë‹ˆë‹¤. ì¹´ë“œ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.',
          'INSUFFICIENT_BALANCE': 'ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í•œë„ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.',
          'CARD_EXPIRED': 'ì¹´ë“œ ìœ íš¨ê¸°ê°„ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
          'NETWORK_ERROR': 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.',
          'USER_CANCEL': 'ì‚¬ìš©ìê°€ ê²°ì œë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.',
          'UNKNOWN': 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'
        };
        
        const message = defaultMessages[errorCode] || defaultMessages['UNKNOWN'];
        document.getElementById('errorMessage').textContent = message;
      }

      // í˜„ì¬ ì‹œê°„ í‘œì‹œ
      const now = new Date();
      const timeString = now.toLocaleDateString('ko-KR') + ' ' + 
                        now.toLocaleTimeString('ko-KR', { 
                          hour: '2-digit', 
                          minute: '2-digit' 
                        });
      document.getElementById('errorTime').textContent = timeString;

      console.log('âŒ ê²°ì œ ì‹¤íŒ¨ í˜ì´ì§€ ë¡œë“œ');
      console.log('ì˜¤ë¥˜ ì½”ë“œ:', errorCode || 'UNKNOWN');
      console.log('ì˜¤ë¥˜ ë©”ì‹œì§€:', errorMessage || 'ì•Œ ìˆ˜ ì—†ìŒ');
    };

    // ë‹¤ì‹œ ê²°ì œí•˜ê¸°
    function retryPayment() {
      // ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
      if (document.referrer && document.referrer.includes('/payment')) {
        window.location.href = document.referrer;
      } else {
        window.location.href = '/payment';
      }
    }
  </script>
</body>
</html>
