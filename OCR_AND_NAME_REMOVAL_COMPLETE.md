# âœ… ì‚¬ì—…ìë“±ë¡ì¦ OCR ìë™ ì¸ì‹ ë° ì´ë¦„ í•„ë“œ ì œê±° ì™„ë£Œ

## ğŸ“‹ êµ¬í˜„ ì™„ë£Œ ì‚¬í•­

### 1ï¸âƒ£ ì‚¬ì—…ìë“±ë¡ì¦ OCR ìë™ ì¸ì‹

#### API ì—”ë“œí¬ì¸íŠ¸
- **URL**: `POST /api/ocr/business-registration`
- **ê¸°ëŠ¥**: ì‚¬ì—…ìë“±ë¡ì¦ ì´ë¯¸ì§€/PDF ì—…ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ì •ë³´ ì¸ì‹
- **íŒŒì¼**: `functions/api/ocr/business-registration.ts`

#### ì§€ì› ê¸°ëŠ¥
- **íŒŒì¼ í˜•ì‹**: JPG, PNG, PDF
- **íŒŒì¼ í¬ê¸°**: ìµœëŒ€ 10MB
- **ì¸ì‹ ì •ë³´**: 
  - ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ (123-45-67890 í˜•ì‹)
  - ìƒí˜¸ëª…
  - ì‹ ë¢°ë„ (confidence)

#### í”„ë¡œë•ì…˜ OCR ì˜µì…˜
1. **Google Vision API** (Option 1)
   - `GOOGLE_VISION_API_KEY` í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
   - ê³ ì •ë°€ í…ìŠ¤íŠ¸ ì¸ì‹
   
2. **Naver Clova OCR** (Option 2)
   - `NAVER_CLOVA_OCR_URL` í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
   - `NAVER_CLOVA_SECRET` í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
   - í•œêµ­ì–´ ìµœì í™”

#### ê°œë°œ ëª¨ë“œ
- Google Vision ë˜ëŠ” Naver Clova ë¯¸ì„¤ì • ì‹œ Mock ë°ì´í„° ë°˜í™˜
- Mock ë°ì´í„°:
  - ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: `123-45-67890`
  - ìƒí˜¸ëª…: `ì£¼ì‹íšŒì‚¬ ì•Œë¹„`
  - ì‹ ë¢°ë„: `0.95`

#### ì‚¬ìš©ì ê²½í—˜ íë¦„
1. êµ¬ì¸ì ì„ íƒ â†’ ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ
2. íŒŒì¼ ì„ íƒ ì‹œ **ìë™ìœ¼ë¡œ OCR API í˜¸ì¶œ**
3. ë¡œë”© í‘œì‹œ: "ì‚¬ì—…ìë“±ë¡ì¦ ì¸ì‹ ì¤‘..." (ìŠ¤í”¼ë„ˆ ì•„ì´ì½˜)
4. **ì„±ê³µ ì‹œ**: 
   - ì´ˆë¡ìƒ‰ ì²´í¬ ì•„ì´ì½˜ âœ…
   - "ì‚¬ì—…ìì •ë³´ ì¸ì‹ ì™„ë£Œ!"
   - ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, ìƒí˜¸ëª… ìë™ ì…ë ¥
   - íŒŒì¼ëª…, í¬ê¸°, ì¸ì‹ëœ ì •ë³´ í‘œì‹œ
5. **ì‹¤íŒ¨ ì‹œ**:
   - ë…¸ë€ìƒ‰ ê²½ê³  ì•„ì´ì½˜ âš ï¸
   - "ìë™ ì¸ì‹ ì‹¤íŒ¨"
   - ìˆ˜ë™ ì…ë ¥ ì•ˆë‚´
   - íŒŒì¼ì€ ìœ ì§€ë¨

### 2ï¸âƒ£ ì´ë¦„ í•„ë“œ ì œê±°

#### ë³€ê²½ ë‚´ìš©
- **Before**: ì´ë¦„ ì…ë ¥ â†’ íœ´ëŒ€í° ë³¸ì¸ì¸ì¦
- **After**: íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ë§Œ (ì´ë¦„ì€ ì¸ì¦ ì‹œ ì…ë ¥)

#### signup.html ë³€ê²½ì‚¬í•­
- âŒ ì´ë¦„ ì…ë ¥ í•„ë“œ ì œê±°
- âœ… íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ì— ì•ˆë‚´ ì¶”ê°€: "âœ… ë³¸ì¸ì¸ì¦ ì‹œ ì´ë¦„ì´ ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤"
- âœ… ë³¸ì¸ì¸ì¦ ë°ì´í„°ì—ì„œ ì´ë¦„ ìë™ ì¶”ì¶œ

#### phone-verification.html ë³€ê²½ì‚¬í•­
- âœ… ì´ë¦„ í•„ë“œë¥¼ í¸ì§‘ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½ (readonly ì œê±°)
- âœ… ì´ë¦„ í•„ìˆ˜ ì…ë ¥ ê²€ì¦ ì¶”ê°€
- âœ… URL íŒŒë¼ë¯¸í„°ì—ì„œ ì´ë¦„ ìë™ ì±„ìš°ê¸° ì œê±°

#### íšŒì›ê°€ì… íë¦„
1. íšŒì›ê°€ì… í˜ì´ì§€ ì ‘ì†
2. êµ¬ì§ì/êµ¬ì¸ì ì„ íƒ
3. (êµ¬ì¸ìë§Œ) ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ â†’ **ìë™ìœ¼ë¡œ ì •ë³´ ì¸ì‹**
4. **íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ ì‹œì‘** â†’ íŒì—… ì—´ë¦¼
5. íŒì—…ì—ì„œ **ì´ë¦„, ì „í™”ë²ˆí˜¸, í†µì‹ ì‚¬, ìƒë…„ì›”ì¼, ì„±ë³„** ì…ë ¥
6. PASS ë˜ëŠ” SMS ì¸ì¦ ì„ íƒ
7. ì¸ì¦ ì™„ë£Œ â†’ **ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ê°€ ìë™ìœ¼ë¡œ íšŒì›ê°€ì… í¼ì— ì „ë‹¬**
8. ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
9. ì•½ê´€ ë™ì˜
10. íšŒì›ê°€ì… ì™„ë£Œ

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### OCR API í…ŒìŠ¤íŠ¸
```bash
curl -X POST http://localhost:3000/api/ocr/business-registration \
  -F "file=@test.png"
```

**ì‘ë‹µ** (ê°œë°œ ëª¨ë“œ):
```json
{
  "success": true,
  "businessNumber": "123-45-67890",
  "businessName": "ì£¼ì‹íšŒì‚¬ ì•Œë¹„",
  "confidence": 0.95,
  "message": "ì‚¬ì—…ìë“±ë¡ì¦ ì •ë³´ë¥¼ ì¸ì‹í–ˆìŠµë‹ˆë‹¤."
}
```

### ì‚¬ìš©ì íë¦„ í…ŒìŠ¤íŠ¸
1. âœ… íšŒì›ê°€ì… í˜ì´ì§€ì—ì„œ ì´ë¦„ í•„ë“œ ì œê±° í™•ì¸
2. âœ… ë³¸ì¸ì¸ì¦ íŒì—…ì—ì„œ ì´ë¦„ ì…ë ¥ ê°€ëŠ¥ í™•ì¸
3. âœ… ë³¸ì¸ì¸ì¦ ì™„ë£Œ ì‹œ ì´ë¦„ ìë™ ì „ë‹¬ í™•ì¸
4. âœ… ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ ì‹œ OCR ìë™ ì‹¤í–‰ í™•ì¸
5. âœ… ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸/ìƒí˜¸ëª… ìë™ ì…ë ¥ í™•ì¸

---

## ğŸŒ ë°°í¬ ì •ë³´

### ìµœì‹  ë°°í¬ URL
- **Production**: https://ef151a23.albi-app.pages.dev
- **Main Domain**: https://albi-app.pages.dev
- **GitHub**: https://github.com/albi260128-cloud/albi-app

### ì»¤ë°‹ ì •ë³´
- **Commit**: `8226c2f`
- **Message**: "âœ¨ Feat: ì‚¬ì—…ìë“±ë¡ì¦ OCR ìë™ ì¸ì‹ ë° ì´ë¦„ í•„ë“œ ì œê±°"

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. íšŒì›ê°€ì… íë¦„ í…ŒìŠ¤íŠ¸
1. https://albi-app.pages.dev/signup.html ì ‘ì†
2. **êµ¬ì¸ì** ì„ íƒ
3. ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ í´ë¦­
4. ì´ë¯¸ì§€ ë˜ëŠ” PDF íŒŒì¼ ì„ íƒ
5. **ìë™ìœ¼ë¡œ "ì¸ì‹ ì¤‘..." í‘œì‹œ** í™•ì¸
6. **ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ì™€ ìƒí˜¸ëª…ì´ ìë™ ì…ë ¥**ë˜ëŠ”ì§€ í™•ì¸
7. íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ ì‹œì‘ ë²„íŠ¼ í´ë¦­
8. íŒì—…ì—ì„œ **ì´ë¦„ì„ ì§ì ‘ ì…ë ¥**
9. ì „í™”ë²ˆí˜¸, í†µì‹ ì‚¬, ìƒë…„ì›”ì¼, ì„±ë³„ ì…ë ¥
10. PASS ë˜ëŠ” SMS ì¸ì¦ ì„ íƒ
11. ì¸ì¦ ì™„ë£Œ í›„ íŒì—…ì´ ë‹«íˆê³  **íšŒì›ê°€ì… í¼ì— ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ê°€ ìë™ ì…ë ¥**ë˜ëŠ”ì§€ í™•ì¸

### 2. OCR API ë‹¨ë… í…ŒìŠ¤íŠ¸
```bash
# í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ìƒì„±
echo -n "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" | base64 -d > test.png

# API í˜¸ì¶œ
curl -X POST https://albi-app.pages.dev/api/ocr/business-registration \
  -F "file=@test.png" | jq .
```

---

## ğŸ”§ í”„ë¡œë•ì…˜ ì„¤ì • (ì„ íƒì‚¬í•­)

### Google Vision API ì„¤ì •
```bash
# Cloudflare Pages í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
npx wrangler pages secret put GOOGLE_VISION_API_KEY --project-name albi-app
# ì…ë ¥: YOUR_GOOGLE_VISION_API_KEY
```

### Naver Clova OCR ì„¤ì •
```bash
# Cloudflare Pages í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
npx wrangler pages secret put NAVER_CLOVA_OCR_URL --project-name albi-app
# ì…ë ¥: YOUR_NAVER_CLOVA_OCR_URL

npx wrangler pages secret put NAVER_CLOVA_SECRET --project-name albi-app
# ì…ë ¥: YOUR_NAVER_CLOVA_SECRET
```

### í™˜ê²½ ë³€ìˆ˜ í™œì„±í™”
`functions/api/ocr/business-registration.ts` íŒŒì¼ì—ì„œ:
- Line 101: `if (env.GOOGLE_VISION_API_KEY && false)` â†’ `if (env.GOOGLE_VISION_API_KEY)`
- Line 147: `if (!ocrResult && env.NAVER_CLOVA_OCR_URL && env.NAVER_CLOVA_SECRET && false)` â†’ `if (!ocrResult && env.NAVER_CLOVA_OCR_URL && env.NAVER_CLOVA_SECRET)`

---

## ğŸ“Š ì£¼ìš” ë³€ê²½ íŒŒì¼

### ì‹ ê·œ ìƒì„±
- `functions/api/ocr/business-registration.ts` - OCR API êµ¬í˜„

### ìˆ˜ì •
- `public/signup.html` - ì´ë¦„ í•„ë“œ ì œê±°, OCR ì—°ë™
- `public/phone-verification.html` - ì´ë¦„ í•„ë“œ í¸ì§‘ ê°€ëŠ¥ìœ¼ë¡œ ë³€ê²½

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] OCR API êµ¬í˜„ (`/api/ocr/business-registration`)
- [x] Google Vision API ì§€ì›
- [x] Naver Clova OCR ì§€ì›
- [x] ê°œë°œ ëª¨ë“œ Mock ë°ì´í„°
- [x] ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ ì‹œ ìë™ OCR í˜¸ì¶œ
- [x] ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸/ìƒí˜¸ëª… ìë™ ì…ë ¥
- [x] íŒŒì¼ ì—…ë¡œë“œ ìƒíƒœ í‘œì‹œ (ë¡œë”©/ì„±ê³µ/ì‹¤íŒ¨)
- [x] ì´ë¦„ í•„ë“œ ì œê±° (signup.html)
- [x] ì´ë¦„ì„ ë³¸ì¸ì¸ì¦ì—ì„œ ì…ë ¥ (phone-verification.html)
- [x] ë³¸ì¸ì¸ì¦ ì™„ë£Œ ì‹œ ì´ë¦„ ìë™ ì „ë‹¬
- [x] ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] Cloudflare Pages ë°°í¬ ì™„ë£Œ
- [x] GitHub í‘¸ì‹œ ì™„ë£Œ

---

## ğŸ‰ ì‚¬ìš©ì ê²½í—˜ ê°œì„  íš¨ê³¼

### Before
1. ì´ë¦„ ì…ë ¥
2. íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ (ì´ë¦„ì€ ì´ë¯¸ ì…ë ¥í–ˆìœ¼ë¯€ë¡œ ì¤‘ë³µ)
3. ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ
4. ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ **ìˆ˜ë™ ì…ë ¥**
5. ìƒí˜¸ëª… **ìˆ˜ë™ ì…ë ¥**

### After
1. íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ (ì´ë¦„ë„ ì—¬ê¸°ì„œ í•œ ë²ˆì— ì…ë ¥)
2. ì‚¬ì—…ìë“±ë¡ì¦ ì—…ë¡œë“œ â†’ **ìë™ìœ¼ë¡œ ì •ë³´ ì¸ì‹** âœ¨
3. ë‚˜ë¨¸ì§€ ì •ë³´ ì…ë ¥

**ì ˆì•½ëœ ì…ë ¥**: ì´ë¦„ ì¤‘ë³µ ì…ë ¥ ì œê±° + ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸/ìƒí˜¸ëª… ìë™ ì…ë ¥

---

## ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„

### ì„ íƒ ì‚¬í•­
1. **í”„ë¡œë•ì…˜ OCR API ì„¤ì •**
   - Google Vision API ë˜ëŠ” Naver Clova OCR í‚¤ ë°œê¸‰
   - Cloudflare Pages í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

2. **OCR ì •í™•ë„ ê°œì„ **
   - ë” ë§ì€ ì‚¬ì—…ìë“±ë¡ì¦ ìƒ˜í”Œë¡œ í…ŒìŠ¤íŠ¸
   - íŒ¨í„´ ë§¤ì¹­ ë¡œì§ ê°œì„ 

3. **ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”**
   - ë‹¤ì–‘í•œ íŒŒì¼ í˜•ì‹ ì§€ì›
   - ì¸ì‹ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ê¸°ëŠ¥

---

## ğŸ“ ë¬¸ì˜

- **GitHub**: https://github.com/albi260128-cloud/albi-app
- **Issues**: https://github.com/albi260128-cloud/albi-app/issues

---

**ì—…ë°ì´íŠ¸ ì¼ì‹œ**: 2026-02-11
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° ë°°í¬ë¨
